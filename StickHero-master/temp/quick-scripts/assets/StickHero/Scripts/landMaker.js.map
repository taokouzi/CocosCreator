{"version":3,"sources":["landMaker.js"],"names":["spriteCreator","require","perfectLabel","storageManager","StateMachine","fsm","data","gameDirector","init","transitions","name","from","to","methods","onLeaveHeroTicked","unregisterEvent","onStickLengthen","Win_Global","isGoHomeBtn","stickLengthen","stick","createStick","x","hero","width","anchorX","ani","getComponent","cc","Animation","play","onHeroTick","onStickFall","stickFall","rotateBy","easing","easeIn","callFunc","stickLength","height","currentLandRange","secondLand","heroMoveToStickEnd","heroMoveToLand","perfect","getScore","pl","showPerfect","se","sequence","runAction","onHeroMoveToLand","sys","localStorage","getItem","woodAudioPlay","stop","landMove","heroMove","length","onLandMove","run_start","gx_run_num","runRange","string","run_num","nandu_id","game_status","successAudioPlay","gameEndFunc","gx_score","registerEvent","landCreateAndMove","num","backgroundLoader","onHeroMoveToStickEnd","heroDown","onHeroDown","gameOver","stickAndHeroDownAction","onGameOver","overLabel","active","geiveBkqLessFunc","overLabel2","find","Label","spawn","scaleTo","fadeTo","on","goHomeFunc","restart","share_n","Math","floor","random","wx","shareAppMessage","title","nickname","imageUrl","query","token","success","res","log","fail","console","isWx","showLoading","fialShyNumFunc","failAudioPlay","onRestart","bgAudioStop","director","loadScene","nanduArr","Class","extends","Component","properties","landRange","v2","landWidth","Node","firstLand","moveDuration","stickSpeed","heroMoveSpeed","stickWidth","canvas","socre_box","scoreLabel","hightestScoreLabel","endScore","endLabel","telLayer","Alert","paoAudio1","AudioSource","paoAudio","ans","ans_time","video","videoPlayer","VideoPlayer","lvName","ans_err_num","show_bkq","ans_sy_n","adv_sy_n","share_sy_n","adiLayer","paoAdi","shareImg","Prefab","onLoad","node","y","jl_run_num","runLength","score","jl_score","heroWorldPosX","changeHightestScoreLabel","createNewLand","range","getLandRange","setPosition","event","target","lvs","mySelectLv","that","getChildByName","EventType","TOUCH_START","e","stopPropagation","yiny","bgAudioPause","loader","loadRes","SpriteFrame","err","spriteFrame","Sprite","bgAudioPlay","yinx","createInnerAudioContext","src","volume","loop","toggleBgAdiFunc","setItem","toggleGameAdiFunc","musicAudioPlay2","bgSprite","load","url","type","texture","clickMadeAdiFunc","bgAdi","audioEngine","pause","paoAudioPlay","paoAudioPause","gzdzzAdi","woodAudioPause","failAdi","failAudioPause","successAdi","successAudioPause","ajaxPost","path","code","answer","adver","share","hideLoading","error","touchStart","bind","TOUCH_END","touchEnd","TOUCH_CANCEL","touchCancel","targetOff","update","dt","heroTick","stickAction","heroAction","moveBy","p","seq","time","winSize","getWinSize","action","l","secondAction","parent","getLandWidth","getHighestScore","setHighestScore","randFloat","rand_en","rand","status","Date","parse","toString","substr","bkqTel","prize","showBkqAnimateFunc","showToast","icon","duration","getCodeFunc","tel","EditBox","codeBtnLabel","get_code","submitTelFunc","bind_tel","selectFhTypeFunc","showAnsListInfoFunc","v","createVideo","getSystemInfoSync","windowWidth","windowHeight","controls","autoplay","onWaiting","onended","argument","exitFullScreen","adverOkFunc","shareOkFunc","shareOkFriendsFunc","ansTimeFunc","vTime","ansTime","callback","unschedule","unscheduleAllCallbacks","ans_max_err_num","setTimeout","fadeOut","schedule","i","color","Color","Button","interactable","fadeIn","topic","answer1","answer2","answer3","answer4","selectAnsFunc","bingo","closeVideoFunc","cbk_nav","count","rotation","isGoHomeFunc","shareZoneFunc","scene","getScene","instantiate","moveTo","destroy","downloadFile","tempFilePath","saveImageToPhotosAlbum","filePath","complete","shareZoneFunc2","uls","previewImage","current","urls","shareZoneFunc3","goToBkqOutFunc","window","location","href","module","exports"],"mappings":"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","file":"landMaker.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\StickHero\\Scripts","sourcesContent":["var spriteCreator = require(\"spriteCreator\");\nvar perfectLabel = require(\"perfectLabel\");\nvar storageManager = require(\"storageManager\");\n\n\n// 引入插件\nvar StateMachine = require(\"state-machine\");\n\nvar fsm = new StateMachine({\n    data:{\n        gameDirector:null,\n    },\n    init: 'stand',\n    transitions:[\n        {name:'stickLengthen',from:'stand',to:'stickLengthened'},\n        {name:'heroTick',from:'stickLengthened',to:'heroTicked'},\n        {name:'stickFall',from:'heroTicked',to:'stickFalled'},\n        {name:'heroMoveToLand',from:'stickFalled',to:'heroMovedToLand'},\n        {name:'landMove',from:'heroMovedToLand',to:'stand'},\n        {name:'heroMoveToStickEnd',from:'stickFalled',to:'heroMovedToStickEnd'},\n        {name:'heroDown',from:'heroMovedToStickEnd',to:'heroDowned'},\n        {name:'gameOver',from:'heroDowned',to:'end'},\n        {name:'restart',from:'end',to:'stand'},\n    ],\n    methods:{\n        onLeaveHeroTicked()\n        {\n            gameDirector.unregisterEvent();\n        },\n        onStickLengthen()\n        {\n            Win_Global.isGoHomeBtn = 1;\n            // console.log('1');\n            gameDirector.stickLengthen = true;\n            gameDirector.stick = gameDirector.createStick();\n            \n\n            /*************************   /2  **************************************/\n            gameDirector.stick.x = gameDirector.hero.x + gameDirector.hero.width * (1-gameDirector.hero.anchorX) + gameDirector.stick.width * gameDirector.stick.anchorX;\n            \n            var ani = gameDirector.hero.getComponent(cc.Animation);\n            \n            // 人物原地动画（棍子升高，人物动）\n            ani.play('heroPush');\n        },\n        onHeroTick()\n        {\n            // console.log('2');\n            Win_Global.isGoHomeBtn = 2;\n            gameDirector.stickLengthen = false;\n            var ani = gameDirector.hero.getComponent(cc.Animation);\n\n            // 人物把棍子推到（棍子停止升高，人物开始出发，推倒棍子）\n            ani.play('heroTick');\n        },\n        onStickFall()\n        {\n            // console.log('3');\n            Win_Global.isGoHomeBtn = 3;\n            //stick fall action.\n            var stickFall = cc.rotateBy(0.2, 90);\n            stickFall.easing(cc.easeIn(3));\n\n            var callFunc = cc.callFunc(function(){\n                var stickLength = gameDirector.stick.height-gameDirector.stick.width * gameDirector.stick.anchorX;\n\n                if(stickLength < gameDirector.currentLandRange || stickLength > gameDirector.currentLandRange+gameDirector.secondLand.width)\n                {//failed.\n                    fsm.heroMoveToStickEnd();\n                    // console.log('失败');\n                }\n                else\n                {//successed\n                    fsm.heroMoveToLand();\n                    if(stickLength > gameDirector.currentLandRange + gameDirector.secondLand.width/2-5 \n                        &&stickLength < gameDirector.currentLandRange + gameDirector.secondLand.width/2+5)\n                    {\n                        gameDirector.perfect ++;\n                        gameDirector.getScore(gameDirector.perfect);\n                        var pl = gameDirector.perfectLabel.getComponent(perfectLabel);\n                        pl.showPerfect(gameDirector.perfect);\n                    }\n                    else\n                    {\n                        gameDirector.perfect = 0;\n                    }\n                    // console.log('成功');\n                }\n            });\n            var se =cc.sequence(stickFall,callFunc);\n            gameDirector.stick.runAction(se);\n        },\n        onHeroMoveToLand()\n        {\n            // console.log('4');\n            Win_Global.isGoHomeBtn = 4;\n            // 棍子击打柱子音效\n            if( cc.sys.localStorage.getItem('yinx') != '0' )\n            {\n                gameDirector.woodAudioPlay();\n            }\n\n            // console.log('4');\n            var ani = gameDirector.hero.getComponent(cc.Animation);\n            var callFunc = cc.callFunc(function(){\n                ani.stop('heroRun');\n                gameDirector.getScore();\n\n                fsm.landMove();\n            });\n\n            // 人物跑动画\n            ani.play('heroRun');\n            gameDirector.heroMove(gameDirector.hero,{length:gameDirector.currentLandRange+gameDirector.secondLand.width,callFunc:callFunc});\n        },\n        onLandMove()\n        {\n            // console.log('5');\n            Win_Global.isGoHomeBtn = 5;\n            run_start ++ ;\n\n            Win_Global.gx_run_num = run_start;\n\n            // 进度更新\n            gameDirector.runRange.string = '距胜利还差 ' + (run_num[nandu_id] - run_start) + ' 步';\n\n\n            // 游戏通关/闯关模式\n            if( run_start >= run_num[nandu_id] && Win_Global.game_status == 0 )\n            {   \n                // console.log('闯关模式通关啦！');\n                if( cc.sys.localStorage.getItem('yinx') != '0' )\n                {\n                    gameDirector.successAudioPlay();\n                }\n\n                // Win_Global.isGoHomeBtn = 8;\n                // gameDirector.endLabel.node.active = true;\n                // gameDirector.endScore.string = Win_Global.gx_score + '分';\n                \n                // 通关调用接口\n                gameDirector.gameEndFunc(Win_Global.gx_score,1);\n            }\n\n            // 游戏进行中/无尽模式\n            else\n            {\n                // console.log('还在继续');\n                var callFunc = cc.callFunc(function(){\n                    gameDirector.registerEvent();\n                });\n\n                gameDirector.landCreateAndMove(callFunc);\n                \n                if( Win_Global.game_status == 1 )\n                {\n                    var num = 1;\n\n                    if( Win_Global.gx_score >= Win_Global.backgroundLoader[0] && Win_Global.gx_score < Win_Global.backgroundLoader[1])\n                    {\n                        num = 2;\n                    }\n                    else if( Win_Global.gx_score >= Win_Global.backgroundLoader[1] && Win_Global.gx_score < Win_Global.backgroundLoader[2])\n                    {\n                        num = 3;\n                    }\n                    else if( Win_Global.gx_score >= Win_Global.backgroundLoader[2] && Win_Global.gx_score < Win_Global.backgroundLoader[3])\n                    {\n                        num = 4;\n                    }\n                    else if( Win_Global.gx_score >= Win_Global.backgroundLoader[3] && Win_Global.gx_score < Win_Global.backgroundLoader[4])\n                    {\n                        num = 5;\n                    }\n                    else if( Win_Global.gx_score >= Win_Global.backgroundLoader[4] && Win_Global.gx_score < Win_Global.backgroundLoader[5])\n                    {\n                        num = 6;\n                    }\n                    else if( Win_Global.gx_score >= Win_Global.backgroundLoader[5] )\n                    {\n                        num = 7;\n                    }\n\n                    // 换背景\n                    gameDirector.backgroundLoader(num);\n                }\n            }\n\n        }, \n        onHeroMoveToStickEnd()\n        {\n            // console.log('6');\n            Win_Global.isGoHomeBtn = 6;\n            // 棍子击打柱子音效\n            // gameDirector.woodAudioPlay();\n            if( cc.sys.localStorage.getItem('yinx') != '0' )\n            {\n                gameDirector.woodAudioPlay();\n            }\n\n            var ani = gameDirector.hero.getComponent(cc.Animation);\n            var callFunc = cc.callFunc(function(){\n                ani.stop('heroRun');\n                fsm.heroDown();\n            });\n            ani.play('heroRun');\n            gameDirector.heroMove(gameDirector.hero,{length:gameDirector.stick.height,callFunc:callFunc});\n        },\n        onHeroDown()\n        {\n            // console.log('7');\n            Win_Global.isGoHomeBtn = 7;\n             var callFunc = cc.callFunc(function(){\n                fsm.gameOver();\n            });\n            gameDirector.stickAndHeroDownAction(callFunc);\n        },\n        onGameOver()\n        {\n            // console.log('8');\n            Win_Global.isGoHomeBtn = 8;\n            // Alert2.show(\"当前关卡未解锁！\", null, false, 0.1);\n            \n\n            // 闯关模式\n            if(  Win_Global.game_status == 0 )\n            {\n                gameDirector.overLabel.active = true;\n            }\n\n            // 无尽模式\n            else\n            {\n            \t// 上报成绩（无尽模式）\n            \tgameDirector.geiveBkqLessFunc(Win_Global.gx_score);\n\n                gameDirector.overLabel2.active = true;\n\n                cc.find('box/score',gameDirector.overLabel2).getComponent(cc.Label).string = '成绩：'+Win_Global.gx_score+'，游戏结束！';\n\n                cc.find('box',gameDirector.overLabel2).runAction( cc.spawn( cc.scaleTo(0.1,1,1),cc.fadeTo(0.1,255) ) )\n\n                // 点击退出（去首页）\n                cc.find('box/out',gameDirector.overLabel2).on('click',function(){\n                    gameDirector.goHomeFunc();\n                })\n                \n                // 点击再玩一次\n                cc.find('box/again',gameDirector.overLabel2).on('click',function(){\n\n                    cc.find('box',gameDirector.overLabel2).runAction( cc.spawn( cc.scaleTo(0.1,1.2,1.2),cc.fadeTo(0.1,0) ) )\n                    \n                    gameDirector.overLabel2.active = false;\n                    fsm.restart();\n                })\n\n                // 点击邀请好友（分享）\n                cc.find('box/share/btn',gameDirector.overLabel2).on('click',function(){\n\n                    var share_n = Math.floor(Math.random()*10+1);\n                    wx.shareAppMessage({\n                      title: '@'+ Win_Global.nickname + ' 走了'+ share_n*100 +'公里，邀请你快来和我一起重走长征路吧！（邀请好友）',\n                      imageUrl: 'https://www.oneh5.com/LJ/game71/share/share'+ share_n +'.png',\n                      query:'share_t='+Win_Global.token,\n                      success(res) \n                      {\n                        cc.log(\"点击邀请好友（分享）成功！\")\n                      },\n                      fail(res) \n                      {\n                        console.log(\"转发失败!!!\")\n                      }\n                    })\n                })\n            }\n\n            if( Win_Global.isWx == 1 ){ wx.showLoading({title:'加载中...'}); }\n\n            // 剩余复活次数回显\n            gameDirector.fialShyNumFunc();\n\n            // 任务掉落音效\n            if( cc.sys.localStorage.getItem('yinx') != '0' )\n            {\n                gameDirector.failAudioPlay();\n            }\n        },\n\n        onRestart()\n        {   \n            gameDirector.bgAudioStop();\n            cc.director.loadScene(\"MainGameScene\");\n            Win_Global.isGoHomeBtn = 0;\n            Win_Global.gx_score = 0;\n        }\n    }\n});\n\n\n\nvar run_num,\n    run_start,\n    nandu_id;\n\nvar gameDirector = null;\n\nvar nanduArr = ['简单','一般','困难'];\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        landRange:cc.v2(20,300),\n        landWidth:cc.v2(20,200),\n        hero:cc.Node,\n        firstLand:cc.Node,\n        secondLand:cc.Node,\n        moveDuration:0.5,\n        stickSpeed:400,\n        heroMoveSpeed:400,\n        // stick:cc.Node,\n        // stickLengthen:false,\n        stickWidth:6,\n\n        canvas:cc.Node,\n\n\n        socre_box:cc.Node,\n        scoreLabel:cc.Label,\n\n        hightestScoreLabel:cc.Label,\n        overLabel:cc.Node,\n\n        // 游戏结束弹窗 （无尽模式）\n        overLabel2:cc.Node,\n\n\n        perfectLabel:cc.Node,\n\n        // 游戏结束时分数\n        endScore: cc.Label,\n\n        // 过关\n        endLabel:cc.Label,\n        \n        // 输入手机号弹窗\n        telLayer:cc.Node,\n\n\n        Alert:cc.Node,\n\n        // 开关音效\n        paoAudio1:cc.AudioSource,\n\n        // 棍子升高音效\n        paoAudio:cc.AudioSource,\n\n        ans: cc.Node,\n        ans_time:cc.Label,\n\n        video: cc.Node,\n        videoPlayer: cc.VideoPlayer,\n\n        // 闯关模式\n        runRange: cc.Label,  //还剩步数\n        lvName: cc.Label,     //关卡名称\n\n\n        ans_err_num: 0,\n\n        show_bkq: cc.Node,\n\n        ans_sy_n: 0,\n        adv_sy_n: 0,\n        share_sy_n: 0,\n\n\n        adiLayer:cc.Node,\n\n\n        paoAdi:null,\n\n\n        shareImg:cc.Prefab,\n    },\n    \n    onLoad: function () \n    {\n        \n        // 进入游戏就开始加载视频（随机1-12）\n        //cc.find('videoPlayer',this.video).getComponent(cc.VideoPlayer).remoteURL = 'https://oneh5.com/thq/201871/mp4/'+ Math.floor(Math.random()*12+1) +'.mp4';\n\n        //init data\n        // alert(storageManager.getHighestScore());\n        gameDirector = this;\n        cc.find('box',this.Alert).runAction( cc.spawn( cc.scaleTo(0,1.2,1.2),cc.fadeTo(0,0) ) )\n        // cc.log( '我记录的成绩啊啊     '+Win_Global.jl_score );\n\n\n\n\n\n        // 无尽模式 不显示还剩步数和关卡名称\n        if( Win_Global.game_status == 1 )\n        { \n            this.lvName.node.active = false; \n            this.runRange.node.active = false; \n            this.socre_box.y = 420;\n            this.scoreLabel.node.y = 420;\n        }\n\n        // 闯关模式 显示还剩步数和关卡名称\n        else\n        {\n            this.lvName.node.active = true; \n            this.runRange.node.active = true; \n            this.socre_box.y = 380;\n            this.scoreLabel.node.y = 380;\n        }\n\n\n\n\n\n\n        run_num = Win_Global.run_num;\n        run_start = Win_Global.jl_run_num;\n        nandu_id = Win_Global.nandu_id;\n\n        this.runLength = 0,\n        this.stick = null;\n        this.stickLengthen = false;\n\n\n        // 记录的分数  （默认0 复活后记录）\n        this.score = Win_Global.jl_score;\n        this.scoreLabel.string = this.score;\n        // this.scoreLabel.string = \"得分：\"+this.score;\n\n\n        \n        this.perfect = 0;\n        this.currentLandRange = 0;\n        this.heroWorldPosX = 0;\n        this.changeHightestScoreLabel();\n\n        //create new land;\n        this.createNewLand();\n\n        var range = this.getLandRange();\n        this.heroWorldPosX = this.firstLand.width - (1-this.hero.anchorX) * this.hero.width - this.stickWidth;\n        this.secondLand.setPosition(range+this.firstLand.width,0);\n        \n        this.registerEvent();\n        //init hero animation callback.\n        var ani = gameDirector.hero.getComponent(cc.Animation);\n        ani.on('stop',(event)=>{\n            if(event.target.name =='heroTick')\n            {\n                fsm.stickFall();\n            }\n        });\n\n\n        // cc.log('当前难度系数：'+nandu_id);\n\n        // cc.log( '游戏模式：0闯关，1无尽 =>'+Win_Global.game_status );\n        \n        // 进度更新\n        this.runRange.string =  '距胜利还差 ' + (run_num[nandu_id] - run_start) + ' 步';\n\n        // 关卡展示\n        var lvs = ['瑞金','遵义会议','四渡赤水','大渡河','翻雪山','过草地','会师'];\n\n        this.lvName.string = lvs[Win_Global.mySelectLv-1];\n\n        var that = this;\n\n        that.endLabel.node.getChildByName('opacity').on( cc.Node.EventType.TOUCH_START , function(e){\n           e.stopPropagation();\n        });\n        cc.find('opacity',that.telLayer).on( cc.Node.EventType.TOUCH_START , function(e){\n           e.stopPropagation();\n        });\n        that.overLabel.getChildByName('opacity').on( cc.Node.EventType.TOUCH_START , function(e){\n           e.stopPropagation();\n        });\n        that.video.on( cc.Node.EventType.TOUCH_START , function(e){\n           e.stopPropagation();\n        });\n        that.ans.on( cc.Node.EventType.TOUCH_START , function(e){\n           e.stopPropagation();\n        });\n\n\n        that.show_bkq.runAction( cc.spawn(cc.scaleTo(0,.5,.5),cc.fadeTo(0,0) ) );\n\n\n        // 点击音乐弹窗背景 取消\n        cc.find('opacity',that.adiLayer).on( cc.Node.EventType.TOUCH_START , function(e){\n           that.adiLayer.active = false;\n        });\n\n        cc.find('box',that.adiLayer).on( cc.Node.EventType.TOUCH_START , function(e){\n           e.stopPropagation();\n        });\n\n        cc.find('opacity',that.Alert).on( cc.Node.EventType.TOUCH_START , function(e){\n           e.stopPropagation();\n        });\n\n\n        // 背景音乐\n        if( cc.sys.localStorage.getItem('yiny') == '0' )\n        {\n            that.yiny = 0;\n            // console.log('音乐关');\n\n            that.bgAudioPause();\n\n            cc.loader.loadRes('page_img/off.png', cc.SpriteFrame, function (err, spriteFrame) \n            {\n                cc.find('box/bgadimg',that.adiLayer).getComponent(cc.Sprite).spriteFrame = spriteFrame;\n            });\n        }\n        else\n        {   \n            that.yiny = 1;\n            // console.log('音乐开');\n\n            that.bgAudioPlay();\n\n            cc.loader.loadRes('page_img/on.png', cc.SpriteFrame, function (err, spriteFrame) \n            {\n                cc.find('box/bgadimg',that.adiLayer).getComponent(cc.Sprite).spriteFrame = spriteFrame;\n            });\n        }\n\n\n        if( cc.sys.localStorage.getItem('yinx') == '0' )\n        {\n            // console.log('音效关');\n            that.yinx = 0;\n\n            cc.loader.loadRes('page_img/off.png', cc.SpriteFrame, function (err, spriteFrame) \n            {\n                cc.find('box/gameimg',that.adiLayer).getComponent(cc.Sprite).spriteFrame = spriteFrame;\n            });\n        }\n        else\n        {\n            // console.log('音效开');\n            that.yinx = 1;\n\n            cc.loader.loadRes('page_img/on.png', cc.SpriteFrame, function (err, spriteFrame) \n            {\n                cc.find('box/gameimg',that.adiLayer).getComponent(cc.Sprite).spriteFrame = spriteFrame;\n            });\n        }\n\n        // console.log( 'btn0 = '+Win_Global.isGoHomeBtn );\n\n\n\n\n\n        if( Win_Global.isWx == 1 )\n        {\n            // 棍子升高音效\n            that.paoAdi = wx.createInnerAudioContext();\n            that.paoAdi.src = 'https://www.oneh5.com/thq/201871/mp3/pao.mp3';\n            that.paoAdi.volume = 0.8;\n            that.paoAdi.loop = true;\n        }\n\n\n\n\n    },\n     // 切换背景音乐\n    toggleBgAdiFunc:function()\n    {   \n        var that = this;\n        // console.log('切换音乐  '+that.yiny);\n        \n        if( that.yiny != 1 )\n        {\n            that.yiny = 1;\n\n            that.bgAudioPlay();\n\n            cc.loader.loadRes('page_img/on.png', cc.SpriteFrame, function (err, spriteFrame) \n            {\n                cc.find('box/bgadimg',that.adiLayer).getComponent(cc.Sprite).spriteFrame = spriteFrame;\n            });\n            cc.sys.localStorage.setItem('yiny','1')\n        }\n        else\n        {\n            that.yiny = 0;\n\n            that.bgAudioPause();\n\n            cc.loader.loadRes('page_img/off.png', cc.SpriteFrame, function (err, spriteFrame) \n            {\n                cc.find('box/bgadimg',that.adiLayer).getComponent(cc.Sprite).spriteFrame = spriteFrame;\n            });\n            cc.sys.localStorage.setItem('yiny','0')\n        }\n    },\n    // 切换游戏音效\n    toggleGameAdiFunc:function()\n    {\n        var that = this;\n\n        if( that.yinx != 1 )\n        {\n            that.yinx = 1;\n\n            that.musicAudioPlay2();\n\n            cc.loader.loadRes('page_img/on.png', cc.SpriteFrame, function (err, spriteFrame) \n            {\n                cc.find('box/gameimg',that.adiLayer).getComponent(cc.Sprite).spriteFrame = spriteFrame;\n            });\n            cc.sys.localStorage.setItem('yinx','1')\n        }\n        else\n        {\n            that.yinx = 0;\n           \n            cc.loader.loadRes('page_img/off.png', cc.SpriteFrame, function (err, spriteFrame) \n            {\n                cc.find('box/gameimg',that.adiLayer).getComponent(cc.Sprite).spriteFrame = spriteFrame;\n            });\n            cc.sys.localStorage.setItem('yinx','0')\n        }\n    },\n\n    \n    // 无尽模式根据成绩换肤\n    backgroundLoader:function(num)\n    {\n        var bgSprite = this.canvas.getChildByName('bg').getComponent(cc.Sprite);\n        cc.loader.load({url:'http://www.oneh5.com/LJ/game71/bg/bg'+num+'.png',type:'png'},function(err, texture) {\n            bgSprite.spriteFrame =  new cc.SpriteFrame(texture);\n        });\n    },\n\n\n    \n    // 点击弹出 设置音乐弹窗\n    clickMadeAdiFunc:function()\n    {   \n        var that = this;\n        that.adiLayer.active = true;\n    },\n\n    // 点击音效开关\n    musicAudioPlay2: function () \n    {\n        // this.gameAdi = cc.audioEngine.play('http://www.oneh5.com/thq/201871/mp3/pao.mp3', false , 0.2 );\n        this.paoAudio1.play();\n    },\n\n    // 背景音效 开\n    bgAudioPlay: function () \n    {\n        this.bgAdi = cc.audioEngine.play('https://www.oneh5.com/thq/201871/mp3/bg.mp3', true , 0.8 );\n    },\n\n    bgAudioStop: function () \n    {\n        cc.audioEngine.stop(this.bgAdi);\n    },\n    // 背景音效 关\n    bgAudioPause: function () \n    {\n        cc.audioEngine.pause(this.bgAdi);\n    },\n    // 棍子变长音效 开\n    paoAudioPlay: function () \n    {   \n        // this.gzsgAdi = cc.audioEngine.play('http://www.oneh5.com/thq/201871/mp3/pao.mp3', true , 1 );\n        this.paoAdi.play();\n    },\n    // 棍子变长音效 关\n    paoAudioPause: function () \n    {   \n        this.paoAdi.pause();\n        // cc.audioEngine.pause(this.gzsgAdi);\n       /* if( this.paoAudio.isPlaying )\n        {\n            this.paoAdi.pause();\n        }*/\n    },\n    // 棍子敲打柱子音效 开\n    woodAudioPlay: function () \n    {\n        this.gzdzzAdi = cc.audioEngine.play('https://www.oneh5.com/thq/201871/mp3/wood.mp3', false , 1 );\n    },\n    // 棍子敲打柱子音效 关\n    woodAudioPause: function () \n    {\n        cc.audioEngine.pause(this.gzdzzAdi);\n    },\n    // 失败掉落音效 开\n    failAudioPlay: function () \n    {\n        this.failAdi = cc.audioEngine.play('https://www.oneh5.com/thq/201871/mp3/failed.mp3', false , 1 );\n    },\n    // 失败掉落音效 关\n    failAudioPause: function () \n    {\n        cc.audioEngine.pause(this.failAdi);\n    },\n    // 成功音效\n    successAudioPlay: function () \n    {\n        this.successAdi = cc.audioEngine.play('https://www.oneh5.com/thq/201871/mp3/success.mp3', false , 1 );\n    },\n    // 成功音效 关\n    successAudioPause: function () \n    {\n        cc.audioEngine.stop(this.successAdi);\n    },\n\n\n    // 剩余复活次数回显\n    fialShyNumFunc:function()\n    {\n        var that = this;\n        Win_Global.ajaxPost(\n            Win_Global.path+'/user.php',\n            {\n                'action': 'left_num',\n                'token': Win_Global.token\n            },\n            function(res)\n            {\n                if( res.code == 1 )\n                {\n                    cc.find('fail/btn1/n',that.overLabel).getComponent(cc.Label).string = res.data.answer;\n                    cc.find('fail/btn2/n',that.overLabel).getComponent(cc.Label).string = res.data.adver;\n                    cc.find('fail/btn3/n',that.overLabel).getComponent(cc.Label).string = res.data.share;\n\n                    that.ans_sy_n = res.data.answer;\n                    that.adv_sy_n = res.data.adver;\n                    that.share_sy_n = res.data.share;\n\n                    if( Win_Global.isWx == 1 ){ wx.hideLoading(); }\n                    \n                }\n            },\n            function( fail ){console.log(fail);},\n            function( error ){console.log(error);}\n        )\n    },\n\n    registerEvent(){\n        this.canvas.on(cc.Node.EventType.TOUCH_START, this.touchStart.bind(this), this.node);\n        this.canvas.on(cc.Node.EventType.TOUCH_END,this.touchEnd.bind(this), this.node);\n        this.canvas.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel.bind(this), this.node);\n        // console.log(\"on\");\n    },\n    unregisterEvent(){\n        this.canvas.targetOff(this.node);\n        // console.log(\"off\");\n    },\n    update(dt){\n\n        // console.log(dt);\n        if(this.stickLengthen)\n        {\n            this.stick.height += dt*this.stickSpeed;\n            // this.stick.height = this.currentLandRange + this.secondLand.width/2;\n        }\n\n\n    },\n    touchStart(event)\n    {\n        fsm.stickLengthen();\n\n        // 棍子变长音效\n        if( cc.sys.localStorage.getItem('yinx') != '0' )\n        {\n            this.paoAudioPlay();\n        }\n        \n        // cc.log(\"touchStart\");\n    },\n    touchEnd(event){\n        fsm.heroTick();\n\n         // 关闭 棍子变长音效\n        this.paoAudioPause();\n        // cc.log(\"touchEnd\");\n    },\n    touchCancel(){\n        this.touchEnd();\n        // cc.log(\"touchCancel\");\n    },\n\n    // 人物掉落\n    stickAndHeroDownAction(callFunc){\n        //stick down action;\n        var stickAction = cc.rotateBy(0.5, 90);\n        stickAction.easing(cc.easeIn(3));\n        this.stick.runAction(stickAction);\n        //hero down action;\n        var heroAction = cc.moveBy(0.5,cc.p(0,-300 - this.hero.height));\n        heroAction.easing(cc.easeIn(3));\n        var seq =cc.sequence(heroAction,callFunc);\n        this.hero.runAction(seq);\n    },\n    heroMove(target,data){\n        var time = data.length/this.heroMoveSpeed;\n        var heroMove = cc.moveBy(time,cc.p(data.length,0));\n        if(data.callFunc)\n        {\n            var se =cc.sequence(heroMove,data.callFunc);\n            this.hero.runAction(se);\n        }\n        else\n        {\n            this.hero.runAction(heroMove);\n        }\n    },\n    landCreateAndMove(callFunc) {\n        var winSize = cc.director.getWinSize();\n        //firstland;\n        var length = this.currentLandRange + this.secondLand.width;\n        this.runLength +=length;\n        var action = cc.moveBy(this.moveDuration,cc.p(-length,0));\n        this.node.runAction(action);\n        this.firstLand = this.secondLand;\n        \n        this.createNewLand();\n        // console.log('xx');\n\n        var that = this;\n        cc.loader.loadRes('hero/hero.png', cc.SpriteFrame, function (err, spriteFrame) \n        {\n            that.hero.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n        });\n\n        //landRange\n        var range = this.getLandRange();\n\n        //secondland;\n        this.secondLand.setPosition(this.runLength+winSize.width,0);\n        var l = winSize.width - range - this.heroWorldPosX - this.hero.width * this.hero.anchorX - this.stickWidth;\n\n        // console.log('llll = '+l);\n\n        var secondAction = cc.moveBy(this.moveDuration,cc.p(-l,0));\n        var seq =cc.sequence(secondAction,callFunc);\n        this.secondLand.runAction(seq);\n    },\n    createStick(){\n        // 初始化创建棍子\n        var stick = spriteCreator.createStick(this.stickWidth);\n        stick.width = 4;\n        stick.parent = this.node;\n        return stick\n    },\n\n    // 生成道路\n    createNewLand() {\n        this.secondLand = spriteCreator.createNewLand(this.getLandWidth());\n        this.secondLand.parent = this.node;\n    },\n    getScore(num)\n    {\n        if(num)\n        {\n            this.score += num*10;  //this.score += num;  \n        }\n        else\n        {\n            this.score += 10;   //this.score++;\n        }\n        if(storageManager.getHighestScore()<this.score){\n            storageManager.setHighestScore(this.score);\n            this.changeHightestScoreLabel();\n        }\n\n        // this.scoreLabel.string = \"得分：\"+this.score;\n        this.scoreLabel.string = this.score;\n\n        Win_Global.gx_score = this.score;\n\n    },\n    changeHightestScoreLabel()\n    {\n        this.hightestScoreLabel.string = \"最高分：\" + storageManager.getHighestScore();\n    },\n    getLandRange(){\n        this.currentLandRange = this.landRange.x +(this.landRange.y - this.landRange.x)*Math.random();\n        var winSize = cc.director.getWinSize();\n        if(winSize.width < this.currentLandRange + this.heroWorldPosX + this.hero.width + this.secondLand.width){\n            this.currentLandRange = winSize.width - this.heroWorldPosX - this.hero.width - this.secondLand.width;\n        }\n        return this.currentLandRange;\n    },\n\n    // 随机生成柱子的宽度\n    getLandWidth(){\n\n        // cc.log('x = ' + this.landWidth.x);\n\n        // cc.log('y = ' + this.landWidth.y);\n\n        // cc.log('w = ' + (this.landWidth.y - this.landWidth.x));\n        var randFloat;\n\n        if( Win_Global.game_status == 1 )\n        {\n        \trandFloat = Win_Global.rand_en/3 +  Math.random() * Win_Global.rand_en;\n        }\n        else\n        {\n        \trandFloat = Win_Global.rand[nandu_id]/2 +  Math.random() * Win_Global.rand[nandu_id];\n        }\n         \n        return this.landWidth.x + (this.landWidth.y - this.landWidth.x)* randFloat;\n        \n    },\n\n    // 游戏通关 \n    gameEndFunc:function(score,status)\n    {\n        if( Win_Global.isWx == 1 ){ wx.showLoading({title:'成绩上报中...'}); }\n\n        var that = this;\n        cc.log(Win_Global.token+'  '+score+'    '+status);\n\n        Win_Global.ajaxPost(\n            Win_Global.path+'/answer.php',\n            {\n                'action':'game_over',\n                'token': Win_Global.token,\n                'score': score,\n                'status': 1,\n                'stime': Date.parse( new Date() ).toString().substr(0,10)\n            },\n            function(res)\n            {\n                // console.log(res);\n                cc.log('通关，上传成绩');\n\n                var bkqTel = cc.sys.localStorage.getItem('bkqTel');\n                // console.log('我的手机号：'+bkqTel);\n\n                that.endLabel.node.active = true;\n                that.endScore.string = Win_Global.gx_score + '分';\n                \n                if( res.code == 1 )\n                {   \n                    if( res.data.prize > 0 )\n                    {   \n                        that.showBkqAnimateFunc();\n\n                        // 手机号\n                        if( !bkqTel )\n                        {\n                            that.telLayer.active = true;\n                        }\n\n                        if( Win_Global.isWx == 1 ){ wx.showToast({title:'审核成功后三天内发放至您的贝壳账户，感谢您的参与！',icon: 'none',duration:5000}); }\n\n                        cc.find('pass/gxnbkq/bkq',that.endLabel.node).getComponent(cc.Label).string = res.data.prize;\n                        cc.find('pass/gxnbkq',that.endLabel.node).active = true;\n                    }\n                    else\n                    {\n                        cc.find('pass/gxnbkq',that.endLabel.node).active = false;\n                    }\n                }\n                else \n                {   \n                    cc.find('pass/gxnbkq',that.endLabel.node).active = false;\n                }\n\n                if( Win_Global.isWx == 1 ){ wx.hideLoading(); }\n            },\n            function( fail ){console.log(fail);},\n            function( error ){console.log(error);}\n        );\n    },\n\n\n    // 上报成绩 （无尽模式）\n    geiveBkqLessFunc:function(score)\n    {\n    \tvar that = this;\n    \t Win_Global.ajaxPost(\n            Win_Global.path+'/share.php',\n            {\n                'action':'endless_game_over',\n                'token': Win_Global.token,\n                'score': score,\n                'stime': Date.parse( new Date() ).toString().substr(0,10)\n            },\n            function(res)\n            {\n            \t// console.log(res);\n            \tconsole.log('上报成绩 （无尽模式） 成功！');\n            },\n            function( fail ){console.log(fail);},\n            function( error ){console.log(error);}\n        )\n    },\n\n\n    // 获取验证码\n    getCodeFunc:function()\n    {\n    \tvar that = this;\n    \tvar tel = cc.find('box/input',that.telLayer).getComponent(cc.EditBox).string || 'null';\n    \tvar codeBtnLabel = cc.find('box/codeBtn/Label',that.telLayer);\n\n    \tWin_Global.get_code(tel,codeBtnLabel);\n    },\n\n    // 绑定手机号\n    submitTelFunc:function()\n    {\n        var that = this;\n        var tel = cc.find('box/input',that.telLayer).getComponent(cc.EditBox).string || 'null';\n        var telLayer = that.telLayer;\n        var code = cc.find('box/code',that.telLayer).getComponent(cc.EditBox).string || 'null';\n        \n        Win_Global.bind_tel(tel,telLayer,code);\n    },\n\n\n\n\n    // 游戏失败 选择复活方式\n    selectFhTypeFunc:function(e,data){\n        // cc.log(data);\n        var that = this;\n        \n        this.bgAudioPause();\n\n        Win_Global.jl_score = Win_Global.gx_score;\n        Win_Global.jl_run_num = Win_Global.gx_run_num;\n\n\n        // 答题\n        if( data == 1 )\n        {   \n            if( that.ans_sy_n > 0 )\n            {\n                this.overLabel.active = false;\n                this.ans.active = true;\n                this.showAnsListInfoFunc();\n            }\n            else\n            {\n                wx.showToast({\n                  title: '答题复活次数已用完，请尝试其他方式！',\n                  icon: 'none',\n                  duration: 2000\n                })\n            }\n        }\n        // 看广告\n        else if( data == 2 )\n        {   \n            if( that.adv_sy_n > 0 )\n            {   \n\n                that.overLabel.active = false;\n\n                if( Win_Global.isWx == 1 ){wx.showLoading({title:'视频加载中...'});}\n\n                /*that.video.active = true;\n\n                cc.find('text',that.video).getComponent(cc.Label).string = '广告视频还剩：10 s';\n\n                // 10s后关闭视频\n                var vTime = Win_Global.v_time;\n\n                that.callback = function () \n                {\n\n                    vTime --;\n\n                    cc.log('广告视频还剩：'+vTime+' s');\n\n                    cc.find('text',that.video).getComponent(cc.Label).string = '广告视频还剩：'+vTime+' s';\n\n                    if ( vTime <= 0) \n                    {\n                        // 看完视频后记录\n                        that.adverOkFunc();\n                        // 停止计时器\n                        that.unschedule(that.callback);\n                        // 隐藏视频盒子\n                        that.video.active = false;\n                        // 复活游戏\n                        fsm.restart();\n\n                    }\n\n                }\n\n                that.schedule(that.callback, 1);*/\n\n\n                if( Win_Global.isWx == 1 )\n                {   \n                    var v = wx.createVideo();\n                    v.src = 'https://www.oneh5.com/thq/201871/mp4/'+ Math.floor(Math.random()*12+1) +'.mp4';\n                    v.width = wx.getSystemInfoSync().windowWidth;\n                    v.height = wx.getSystemInfoSync().windowHeight;\n                    // v.poster = 'https://oneh5.com/thq/FLH/backend_api/images/upload/20180709/blockcard3.png';\n                    v.controls = false;\n                    v.autoplay = true;\n                    v.loop = false;\n                    // v.requestFullScreen();\n                    \n                    if( Win_Global.isWx == 1 ){wx.hideLoading();}\n                    v.play();\n\n                    v.onWaiting = function(res)\n                    {\n                        // console.log(res);\n                        wx.showLoading({title:'视频加载中...'});\n                    }\n                    \n                    v.onended = function (argument) \n                    {\n                        // console.log('视频播放完了');\n                        v.exitFullScreen();\n                        v.stop();\n                        v.width = 0;\n                        v.height = 0;\n\n                        // 看完视频后记录\n                        that.adverOkFunc();\n                        // 复活游戏\n                        fsm.restart();\n                    }\n                }\n\n            }\n            else\n            {\n                wx.showToast({\n                  title: '视频广告复活次数已用完，请尝试其他方式！',\n                  icon: 'none',\n                  duration: 2000\n                })\n            }\n        }\n\n        // 分享\n        else if( data == 3 )\n        {\n\n            if( that.share_sy_n <= 0 )\n            {\n                wx.showToast({\n                  title: '分享复活次数已用完，分享后将不能复活游戏',\n                  icon: 'none',\n                  duration: 2000\n                })\n            }\n\n            var share_n = Math.floor(Math.random()*10+1);\n\n            wx.shareAppMessage({\n              title: '@'+ Win_Global.nickname + ' 走了'+ share_n*100 +'公里，邀请你快来和我一起重走长征路吧！',\n              imageUrl: 'https://www.oneh5.com/LJ/game71/share/share'+ share_n +'.png',\n              success(res) \n              {\n                // console.log(\"转发成功!!!\")\n\n                if ( that.share_sy_n > 0 ) \n                {\n                    that.shareOkFunc();\n                    fsm.restart();\n                }\n\n              },\n              fail(res) \n              {\n                console.log(\"转发失败!!!\")\n              }\n            })\n\n        }\n    },\n\n    // 视频观看完成之后执行\n    adverOkFunc:function()\n    {\n        var that = this;\n\n        Win_Global.ajaxPost(\n            Win_Global.path+'/answer.php?action=get_adver',\n            {\n                'action': 'get_adver',\n                'token': Win_Global.token\n            },\n            function(res)\n            {\n                // console.log(res);\n                if( res.code == 1 )\n                {  \n                    console.log('视频观看完后记录');\n                }\n            },\n            function( fail ){console.log(fail);},\n            function( error ){console.log(error);}\n\n        );\n    },\n\n\n    // 邀请好友\n    shareOkFriendsFunc:function(){\n\n    },\n\n    // 转发成功后执行复活\n    shareOkFunc:function()\n    {   \n        var that = this;\n\n         Win_Global.ajaxPost(\n            Win_Global.path+'answer.php',\n            {\n                'action': 'share_log',\n                'token': Win_Global.token\n            },\n            function(res)\n            {\n                if(  res.code == 1 )\n                {\n                    console.log('转发成功后记录');\n                }\n            },\n            function( fail ){console.log(fail);},\n            function( error ){console.log(error);}\n        )\n    },\n\n\n    // 答题倒计时\n    ansTimeFunc:function(){\n\n        var that = this;\n\n        // 10s后答题失败\n        var vTime = Win_Global.ansTime;\n\n        this.callback = function () \n        {   \n            that.ans_time.string = vTime;\n\n             if ( vTime <= 0) \n             {\n                vTime = 0;\n                \n                this.unschedule(this.callback);\n                that.ans_err_num ++;\n\n                \n                that.unscheduleAllCallbacks();\n\n\n                // cc.find('ans_err',that.ans).runAction( cc.fadeIn(0.1) );\n\n                if( that.ans_err_num < Win_Global.ans_max_err_num )\n                {\n                    // 超时 答案渐显\n                    // cc.find('ans_err/text',that.ans).getComponent(cc.Label).string = '超时，继续答题！';\n                    if( Win_Global.isWx == 1 ){ wx.showToast({title:'超时，继续答题！',icon: 'none',duration:5000}); }\n\n                    setTimeout(function(){\n                        cc.find('title',that.ans).runAction( cc.fadeOut(0.1) );\n                        cc.find('ansList',that.ans).runAction( cc.fadeOut(0.1) );\n                        that.showAnsListInfoFunc();\n                    },5000)\n                }\n\n                // 连续答错5题  游戏结束\n                else\n                {\n                    // cc.find('ans_err/text',that.ans).getComponent(cc.Label).string = '答题连错'+Win_Global.ans_max_err_num+'题，很遗憾，游戏结束！';\n                    if( Win_Global.isWx == 1 ){ wx.showToast({title:'答题连错'+Win_Global.ans_max_err_num+'题，很遗憾，游戏结束！',icon: 'none',duration:5000}); }\n                    \n                    setTimeout(function(){\n                        that.goHomeFunc();\n                    },5000)\n                }\n             }\n\n             vTime --;\n         \n        }\n\n        this.schedule(this.callback, 1);\n\n    },\n\n\n    // 获取答题列表\n    showAnsListInfoFunc:function()\n    {\n        var that = this;\n\n        if( Win_Global.isWx == 1 ){ wx.showLoading({title:'正在获取题目...'}); }\n\n        // 停止所有计时器\n        that.unscheduleAllCallbacks();\n\n        // cc.find('ans_err',that.ans).runAction( cc.fadeOut(0.1) ); \n\n\n        // 答案样式恢复默认\n        cc.loader.loadRes('page_img/btn_g21.png', cc.SpriteFrame, function (err, spriteFrame) \n        {   \n            for( var i=1;i <=4 ;i++ )\n            {\n                cc.find('ansList/ansBtn'+i,that.ans).getComponent(cc.Sprite).spriteFrame = spriteFrame;\n                cc.find('ansList/ansBtn'+i+'/ans_text',that.ans).color = new cc.Color(0,0,0,255);\n                cc.find('ansList/ansBtn'+i,that.ans).getComponent(cc.Button).interactable = true;\n            }\n        });\n        \n        \n        Win_Global.ajaxPost(\n            Win_Global.path+'/answer.php',\n            {\n                'action': 'topic',\n                'token': Win_Global.token\n            },\n            function(res)\n            {\n                if( res.code == 1 )\n                {  \n                    // 开始倒计时\n                    that.ans_time.string = 99;\n                    that.ansTimeFunc();\n\n                    // 答案渐显\n                    cc.find('title',that.ans).runAction( cc.fadeIn(0.1) );\n                    cc.find('ansList',that.ans).runAction( cc.fadeIn(0.1) );\n\n                    cc.find('title',that.ans).getComponent(cc.Label).string = res.data.topic;\n                    cc.find('ansList/ansBtn1/ans_text',that.ans).getComponent(cc.Label).string = res.data.answer1;\n                    cc.find('ansList/ansBtn2/ans_text',that.ans).getComponent(cc.Label).string = res.data.answer2;\n                    cc.find('ansList/ansBtn3/ans_text',that.ans).getComponent(cc.Label).string = res.data.answer3;\n                    cc.find('ansList/ansBtn4/ans_text',that.ans).getComponent(cc.Label).string = res.data.answer4;\n\n                    if( Win_Global.isWx == 1 ){ wx.hideLoading(); }\n                }\n            },\n            function( fail ){console.log(fail);},\n            function( error ){console.log(error);}\n        );\n    },\n\n    // 选择答案\n    selectAnsFunc:function(e,data)\n    {   \n        var that = this;\n\n        // 选择后改变字体颜色\n        cc.find('ansList/ansBtn'+data+'/ans_text',that.ans).color = new cc.Color(181,31,36,255);\n\n        // 选择后禁用按钮\n        for( var i=1;i <=4 ;i++ )\n        {\n            cc.find('ansList/ansBtn'+i,that.ans).getComponent(cc.Button).interactable = false;\n        }\n\n\n        Win_Global.ajaxPost(\n            Win_Global.path+'/answer.php',\n            {\n                'action': 'topic_answer',\n                'token': Win_Global.token,\n                'user_answer': data\n            },\n            function(res)\n            {   \n                that.unscheduleAllCallbacks();\n                // console.log(res);\n                if ( res.code == 1 )\n                {   \n                    // 选择正确\n                   if( res.data.success == 1 )\n                    {   \n                        cc.log('答题成功！');\n                        // 答题成功样式\n                        cc.loader.loadRes('page_img/ans_ok.png', cc.SpriteFrame, function (err, spriteFrame) \n                        {\n                            cc.find('ansList/ansBtn'+data,that.ans).getComponent(cc.Sprite).spriteFrame = spriteFrame;\n                        });\n\n                        setTimeout(function(){\n                            that.ans.active = false;\n                            fsm.restart();\n                        },2000)\n                    }\n\n                    // 选择错误\n                    else if( res.data.success == 2 )\n                    {   \n\n                        that.ans_err_num ++;\n                        cc.log(that.ans_err_num);\n\n\n                        // 答题错误样式\n                        cc.loader.loadRes('page_img/ans_fail.png', cc.SpriteFrame, function (err, spriteFrame) \n                        {\n                            cc.find('ansList/ansBtn'+data,that.ans).getComponent(cc.Sprite).spriteFrame = spriteFrame;\n                        });\n\n                        // 显示正确答案\n                        cc.loader.loadRes('page_img/ans_ok.png', cc.SpriteFrame, function (err, spriteFrame) \n                        {\n                            cc.find('ansList/ansBtn'+res.data.bingo,that.ans).getComponent(cc.Sprite).spriteFrame = spriteFrame;\n                        });\n\n\n\n                        // cc.find('ans_err',that.ans).runAction( cc.fadeIn(0.1) );\n\n\n                        if( that.ans_err_num < Win_Global.ans_max_err_num )\n                        {\n                            // 选择错误 答案渐显\n                            // cc.find('ans_err/text',that.ans).getComponent(cc.Label).string = '选择错误，继续答题！';\n                            \n                            if( Win_Global.isWx == 1 ){ wx.showToast({title:'选择错误，继续答题！',icon:'none',duration:5000}); }\n\n                            setTimeout(function(){\n                                cc.find('title',that.ans).runAction( cc.fadeOut(0.1) );\n                                cc.find('ansList',that.ans).runAction( cc.fadeOut(0.1) );\n                                that.showAnsListInfoFunc();\n                            },5000)\n                        }\n\n                        // 连续答错5题  游戏结束\n                        else\n                        {\n                            // cc.find('ans_err/text',that.ans).getComponent(cc.Label).string = '答题连错'+Win_Global.ans_max_err_num+'题，很遗憾，游戏结束！';\n                            \n                            if( Win_Global.isWx == 1 ){ wx.showToast({title:'答题连错'+Win_Global.ans_max_err_num+'题，很遗憾，游戏结束！',icon:'none',duration:5000}); }\n\n                            setTimeout(function(){\n                                that.goHomeFunc();\n                            },5000)\n                        }\n\n                        \n                    }\n                }\n            },\n            function( fail ){console.log(fail);},\n            function( error ){console.log(error);}\n        );\n    },\n\n\n\n    // 关闭视频广告\n    closeVideoFunc:function(e,data){\n        cc.log(data);\n        cc.log('xxkkkk');\n    },\n\n\n    // 结束游戏 回到主页面\n    goHomeFunc:function()\n    {   \n        Win_Global.gx_score = 0;\n        Win_Global.jl_score = 0;\n        \n        Win_Global.gx_run_num = 0;\n        Win_Global.jl_run_num = 0;\n        \n        this.bgAudioPause();\n        cc.director.loadScene(\"page\");\n\n        Win_Global.cbk_nav = 1;\n    },\n\n\n    // 贝壳券动画\n    showBkqAnimateFunc:function()\n    {   \n        var that = this;\n        \n        that.show_bkq.runAction( cc.spawn(cc.scaleTo(.5,1,1),cc.fadeTo(.5,255) ) );\n\n        this.count = 0;\n        this.callback = function () \n        {\n             if (this.count >= 35) \n             {\n                 this.unschedule(this.callback);\n                 that.show_bkq.runAction( cc.fadeTo(.3,0) );\n             }\n             \n             cc.find('bg',that.show_bkq).rotation += 10;\n             this.count++;\n        }\n        that.schedule(this.callback, 0.07);\n\n    },\n    \n    \n    // 点击游戏页面 去主页，二次确认\n    isGoHomeFunc:function()\n    {   \n        var that = this;\n\n        that.Alert.active = true;\n\n        cc.find('box/text',that.Alert).getComponent(cc.Label).string = '确定回到主页吗？';\n\n        cc.find('box',that.Alert).runAction( cc.spawn( cc.scaleTo(0.1,1,1),cc.fadeTo(0.1,255) ) )\n\n        // 点击确定\n        cc.find('box/ok',that.Alert).on('click',function(){\n            that.goHomeFunc();\n        })\n        \n        cc.find('box/qux',that.Alert).on('click',function(){\n            cc.find('box',that.Alert).runAction( cc.spawn( cc.scaleTo(0.1,1.2,1.2),cc.fadeTo(0.1,0) ) )\n            setTimeout(function(){\n                that.Alert.active = false;\n            },100)\n        })\n        \n    },\n\n\n    // 分享到朋友圈\n    shareZoneFunc:function()\n    {\n        var that = this;\n        // wx.showLoading({title:'专属二维码生成中...'});\n\n        /*Win_Global.ajaxPost(\n            Win_Global.path+'/user.php',\n            {\n                'action':'share_img',\n                'token':Win_Global.token\n            },\n            function(res)\n            {   console.log(res.data.img_url);\n                if( res.code == 1 )\n                {*/\n                    var scene = cc.director.getScene();\n                    var node = cc.instantiate(that.shareImg);\n\n                    node.parent = scene;\n\n                    cc.loader.load({url:'https://www.oneh5.com/yjl/party_answer/front_api/api/../images/qrcode/share_fa971ce35c0c799d.png',type:'png'},function(err, texture) {\n                        node.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\n                    });\n\n                    node.runAction( cc.sequence(cc.scaleTo(1,0.2),cc.moveTo(.6,cc.p(640*0.76,960*0.1)) ) );\n                    setTimeout(function(){\n                        node.runAction( cc.fadeTo(.5,0) );\n                    },2800)\n\n                    setTimeout(function(){\n                        node.destroy();\n                    },3500)\n\n                    // setTimeout(function(){\n\n\n                    wx.downloadFile({\n                      url:'https://www.oneh5.com/yjl/party_answer/front_api/api/../images/qrcode/share_fa971ce35c0c799d.png',\n                      success:function(res)\n                      {\n                        console.log('保存图片到本地');\n                        console.log(res);\n                        let path = res.tempFilePath\n                        wx.saveImageToPhotosAlbum({\n                          filePath: path,\n                          success(res) \n                          {\n                            wx.showToast({\n                              title: '已将你的专属二维码保存到相册中，现在可以去发朋友圈了哦',\n                              icon: 'none',\n                              duration: 2000\n                            })\n\n                            that.shareImg.runAction(cc.scaleTo(0,1));\n\n                            console.log('保存图片到本地1');\n                            console.log('已将你的专属二维码保存到相册中，现在可以去发朋友圈了哦');\n                            console.log(res);\n                          },\n                          fail(res) \n                          {\n                            console.log('保存图片到本地2');\n                            console.log(res)\n                          },\n                          complete(res) \n                          {\n                            console.log('保存图片到本地3');\n                            console.log(res)\n                          }\n                        })\n                      },\n                      fail:function(res)\n                      {\n                        console.log('保存图片到本地0');\n                        console.log(res)\n                      }\n                    })\n\n                // },2000)\n                /*}\n            },\n            function( fail ){console.log(fail);},\n            function( error ){console.log(error);}\n        );*/\n\n        \n    },\n\n\n    // \n    shareZoneFunc2:function()\n    {   \n        /*var that = this;\n        Win_Global.ajaxPost(\n            Win_Global.path+'/user.php',\n            {\n                'action': 'share_img',\n                'token': Win_Global.token\n            },\n            function(res)\n            {   \n                if( res.code == 1 )\n                {\n                    var uls = [ res.data.img_url ];\n                    wx.previewImage({\n                        current: res.data.img_url,\n                        urls: uls\n                    })\n                }\n            },\n            function( fail ){console.log(fail);},\n            function( error ){console.log(error);}\n        );*/\n\n        var uls = [ 'https://www.oneh5.com/yjl/party_answer/front_api/api/../images/qrcode/share_fa971ce35c0c799d.png' ];\n        wx.previewImage({\n            current: 'https://www.oneh5.com/yjl/party_answer/front_api/api/../images/qrcode/share_fa971ce35c0c799d.png',\n            urls: uls\n        })\n\n    },\n\n    // 测试识别二维码\n    shareZoneFunc3:function()\n    {   \n        var uls = [ 'https://www.oneh5.com/LJ/bkEWM.png' ];\n        wx.previewImage({\n            current: 'https://www.oneh5.com/LJ/bkEWM.png',\n            urls: uls\n        })\n\n    },\n\n\n\n\n    // 跳外部查看贝壳券\n    goToBkqOutFunc:function()\n    {\n        // if( Win_Global.isWx == 1 ){ wx.showToast({title:'跳转到外部查看贝壳券数量',icon: 'none'}); }\n        window.location.href = 'https://bk.189store.com/h5/user/base?bk_tel=' + Win_Global.token;\n    },\n\n});\n\nmodule.exports = fsm;"]}